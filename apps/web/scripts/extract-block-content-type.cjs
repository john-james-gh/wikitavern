const fs = require("fs")
const path = require("path")
const {Schema} = require("@sanity/schema")
const {schemaTypes} = require("@workspace/cms-schema/schema-types")

const compiled = Schema.compile({types: schemaTypes})
const blockType = compiled.get("page").fields.find((f) => f.name === "content").type

const outPath = path.join(__dirname, "../lib/sanity/block-content-type.ts")
const fileContents = `
// ⚠️ AUTO-GENERATED — DO NOT EDIT THIS FILE ⚠️
export const blockContentType: any = ${JSON.stringify(blockType, null, 2)};
`
fs.writeFileSync(outPath, fileContents.trim())
console.log("› Generated ", outPath)
